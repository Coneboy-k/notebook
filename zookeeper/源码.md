# 启动单机模式
首先启动单机模式
## `ZooKeeperServerMain`
* 启动的主类
* 根据配置文件 实例化`ZooKeeperServer`对象.
* `AdminServerFactory`创建管理服务,并启动监听
* `ServerCnxnFactory`创建连接管理,统一处理网络收发

## `NIOServerCnxnFactory`
* 连接管理的一个`NIO`实现类,同样的还有`NettyServerCnxnFactory`
* 通过`configure`方法,配置并初始化`ServerSocketChannel`
* 使用多个`SelectorThread`,并作为参数`selectorThreads`传递给`AcceptThread`
* 使用`AcceptThread`处理监听网络事件

### `AcceptThread`
* `NIOServerCnxnFactory`内部类
* 用于通过选择器,监听`ServerSocketChannel`的`Accept`状态
* 通过`doAccept`方法,处理到来的连接,获取客户端ip,限制每个客户端最大的连接数
* 讲到来的连接,通过循环选择`selectorThreads`中的`selector`线程,分配连接给它.
